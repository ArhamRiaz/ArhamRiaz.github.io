import{ac as w,ad as B,U as S,K as N,o as I,I as O,v as y,A as x,S as F,ae as Y,q as j,F as U,_ as q,af as C,G as z,W as G,z as K,y as R,ag as P,ah as $,ai as H,g as m,h as W,aj as Z,ak as J,al as Q,am as V,E as X,an as ee,ao as te,b as se,a as re,ap as ae,aq as ie,ar as ne,as as T,at as D,au as p}from"./BXxD7GZt.js";class fe{anchor;#t=new Map;#s=new Map;#e=new Map;#r=new Set;#a=!0;constructor(t,s=!0){this.anchor=t,this.#a=s}#i=()=>{var t=w;if(this.#t.has(t)){var s=this.#t.get(t),e=this.#s.get(s);if(e)B(e),this.#r.delete(s);else{var a=this.#e.get(s);a&&(this.#s.set(s,a.effect),this.#e.delete(s),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),e=a.effect)}for(const[i,f]of this.#t){if(this.#t.delete(i),i===t)break;const n=this.#e.get(f);n&&(S(n.effect),this.#e.delete(f))}for(const[i,f]of this.#s){if(i===s||this.#r.has(i))continue;const n=()=>{if(Array.from(this.#t.values()).includes(i)){var u=document.createDocumentFragment();F(f,u),u.append(I()),this.#e.set(i,{effect:f,fragment:u})}else S(f);this.#r.delete(i),this.#s.delete(i)};this.#a||!e?(this.#r.add(i),N(f,n,!1)):n()}}};#n=t=>{this.#t.delete(t);const s=Array.from(this.#t.values());for(const[e,a]of this.#e)s.includes(e)||(S(a.effect),this.#e.delete(e))};ensure(t,s){var e=w,a=Y();if(s&&!this.#s.has(t)&&!this.#e.has(t))if(a){var i=document.createDocumentFragment(),f=I();i.append(f),this.#e.set(t,{effect:O(()=>s(f)),fragment:i})}else this.#s.set(t,O(()=>s(this.anchor)));if(this.#t.set(e,t),a){for(const[n,o]of this.#s)n===t?e.skipped_effects.delete(o):e.skipped_effects.add(o);for(const[n,o]of this.#e)n===t?e.skipped_effects.delete(o.effect):e.skipped_effects.add(o.effect);e.oncommit(this.#i),e.ondiscard(this.#n)}else y&&(this.anchor=x),this.#i()}}function le(r,t,s=!1){y&&U();var e=new fe(r),a=s?q:0;function i(f,n){if(y){const u=C(r)===z;if(f===u){var o=G();K(o),e.anchor=o,R(!1),e.ensure(f,n),R(!0);return}}e.ensure(f,n)}j(()=>{var f=!1;t((n,o=!0)=>{f=!0,i(o,n)}),f||i(!1,null)},a)}let b=!1;function oe(r){var t=b;try{return b=!1,[r(),b]}finally{b=t}}const ce={get(r,t){let s=r.props.length;for(;s--;){let e=r.props[s];if(p(e)&&(e=e()),typeof e=="object"&&e!==null&&t in e)return e[t]}},set(r,t,s){let e=r.props.length;for(;e--;){let a=r.props[e];p(a)&&(a=a());const i=P(a,t);if(i&&i.set)return i.set(s),!0}return!1},getOwnPropertyDescriptor(r,t){let s=r.props.length;for(;s--;){let e=r.props[s];if(p(e)&&(e=e()),typeof e=="object"&&e!==null&&t in e){const a=P(e,t);return a&&!a.configurable&&(a.configurable=!0),a}}},has(r,t){if(t===T||t===D)return!1;for(let s of r.props)if(p(s)&&(s=s()),s!=null&&t in s)return!0;return!1},ownKeys(r){const t=[];for(let s of r.props)if(p(s)&&(s=s()),!!s){for(const e in s)t.includes(e)||t.push(e);for(const e of Object.getOwnPropertySymbols(s))t.includes(e)||t.push(e)}return t}};function de(...r){return new Proxy({props:r},ce)}function he(r,t,s,e){var a=!re||(s&ae)!==0,i=(s&te)!==0,f=(s&ne)!==0,n=e,o=!0,u=()=>(o&&(o=!1,n=f?se(e):e),n),d;if(i){var L=T in r||D in r;d=P(r,t)?.set??(L&&t in r?c=>r[t]=c:void 0)}var h,A=!1;i?[h,A]=oe(()=>r[t]):h=r[t],h===void 0&&e!==void 0&&(h=u(),d&&(a&&$(),d(h)));var l;if(a?l=()=>{var c=r[t];return c===void 0?u():(o=!0,c)}:l=()=>{var c=r[t];return c!==void 0&&(n=void 0),c===void 0?n:c},a&&(s&H)===0)return l;if(d){var M=r.$$legacy;return(function(c,v){return arguments.length>0?((!a||!v||M||A)&&d(v?l():c),c):l()})}var g=!1,_=((s&ie)!==0?W:Z)(()=>(g=!1,l()));i&&m(_);var k=X;return(function(c,v){if(arguments.length>0){const E=v?m(_):a&&i?J(c):c;return Q(_,E),g=!0,n!==void 0&&(n=E),c}return V&&g||(k.f&ee)!==0?_.v:m(_)})}export{fe as B,le as i,he as p,de as s};
